# TCP/UART统一界面应用

这是一个功能强大的TCP/UART桥接应用，采用统一界面设计，将TCP和UART功能整合在同一个界面中，提供更好的用户体验。

## 🎯 界面设计特点

### 1. 统一界面布局
- **左右分布**：TCP功能在左侧，UART功能在右侧
- **统一数据显示**：所有数据在底部统一显示
- **数据过滤**：可选择显示TCP数据、UART数据或两者
- **标签页设计**：主通信界面 + 数据转发界面

### 2. 界面结构
```
┌─────────────────────────────────────────────────────────┐
│                    TCP/UART通信                          │
├─────────────────────┬───────────────────────────────────┤
│      TCP通信        │           UART通信                │
│  ┌───────────────┐  │  ┌─────────────────────────────┐   │
│  │ 模式选择      │  │  │ 串口配置                   │   │
│  │ 连接配置      │  │  │ 数据发送                   │   │
│  │ 数据发送      │  │  │ 快速发送                   │   │
│  └───────────────┘  │  └─────────────────────────────┘   │
├─────────────────────┴───────────────────────────────────┤
│                统一数据显示区域                          │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 控制按钮: 清空 | 自动滚动 | 显示TCP | 显示UART  │   │
│  │ ┌─────────────────────────────────────────────┐ │   │
│  │ │           数据显示区域                      │ │   │
│  │ └─────────────────────────────────────────────┘ │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

## 🚀 主要功能

### 1. TCP通信功能（左侧）
- **模式选择**：客户端/服务端模式切换
- **连接配置**：主机地址和端口号设置
- **数据发送**：文本输入和快速发送按钮
- **换行符控制**：可选择是否在发送时添加换行符

### 2. UART通信功能（右侧）
- **串口配置**：串口选择和波特率设置
- **数据发送**：UART数据发送和快速发送
- **换行符控制**：可选择是否在发送时添加换行符
- **快速发送**：AT命令等预设按钮

### 3. 统一数据显示（底部）
- **数据过滤**：可选择显示TCP数据、UART数据或两者
- **自动滚动**：新数据自动滚动到底部
- **清空显示**：一键清空所有数据
- **时间戳**：每条数据都带有时间戳

### 4. 数据转发功能
- **UART → TCP**：将UART接收的数据转发到TCP
- **TCP → UART**：将TCP接收的数据转发到UART
- **转发显示**：在数据转发标签页显示转发状态

## 📋 使用方法

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 运行应用
```bash
python tcp_client_server_app.py
```

### 3. TCP通信使用
1. 在左侧TCP区域选择客户端或服务端模式
2. 配置连接参数（IP地址和端口号）
3. 点击连接/启动服务
4. 在发送框中输入数据并发送

### 4. UART通信使用
1. 在右侧UART区域点击"刷新端口"检测可用串口
2. 选择串口和波特率
3. 点击"连接串口"
4. 在发送框中输入数据并发送

### 5. 数据显示控制
1. 使用"显示TCP数据"和"显示UART数据"复选框控制数据显示
2. 使用"自动滚动"控制是否自动滚动到最新数据
3. 使用"清空显示"清空所有数据

### 6. 数据转发使用
1. 切换到"数据转发"标签页
2. 勾选需要的转发方向
3. 确保TCP和UART都已连接
4. 数据将自动转发

## 🎯 界面优势

### 1. 操作便捷
- **一目了然**：TCP和UART功能在同一界面，操作更直观
- **统一管理**：所有数据在统一区域显示，便于监控
- **快速切换**：无需切换标签页即可使用两种通信方式

### 2. 功能强大
- **数据过滤**：可选择显示特定类型的数据
- **实时监控**：同时监控TCP和UART数据
- **数据转发**：实现两种通信方式间的数据桥接

### 3. 用户体验
- **界面清晰**：左右分布，功能区域明确
- **操作简单**：所有功能都在主界面，操作便捷
- **状态明确**：连接状态和数据显示清晰

## 🔧 技术实现

### 1. 界面布局
- **QHBoxLayout**：水平布局，左右分布TCP和UART
- **QVBoxLayout**：垂直布局，上下分布功能区域
- **QGroupBox**：功能分组，界面更清晰

### 2. 数据显示
- **统一显示**：TCP和UART数据在同一个显示区域
- **数据过滤**：通过复选框控制数据显示
- **自动滚动**：新数据自动滚动到底部

### 3. 多线程架构
- **TCP线程**：处理TCP通信
- **UART线程**：处理串口通信
- **信号槽机制**：线程间安全通信

## 💡 使用技巧

### 1. 数据过滤
- 如果只想看TCP数据，取消勾选"显示UART数据"
- 如果只想看UART数据，取消勾选"显示TCP数据"
- 两个都勾选则显示所有数据

### 2. 数据转发
- 确保TCP和UART都已连接
- 在数据转发标签页启用转发选项
- 转发状态会在转发标签页显示

### 3. 快速操作
- 使用快速发送按钮快速发送常用命令
- 使用换行符控制适应不同协议需求
- 使用自动滚动保持最新数据可见

## 🚨 注意事项

1. **串口权限**：Linux系统可能需要串口权限
2. **端口占用**：确保端口未被其他程序占用
3. **数据编码**：目前只支持UTF-8编码
4. **界面大小**：建议使用较大屏幕以获得最佳体验
5. **数据过滤**：过滤只影响显示，不影响实际通信

## 📊 性能优化

1. **数据过滤**：通过过滤减少显示数据量
2. **自动滚动**：可选择关闭自动滚动以提高性能
3. **内存管理**：定期清空显示数据
4. **线程优化**：合理使用线程资源

这个统一界面设计让TCP和UART功能更加集中和便捷，提供了更好的用户体验！

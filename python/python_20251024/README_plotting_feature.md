# TCP/UART实时绘图功能

这是一个增强版的TCP/UART统一通信应用，新增了实时数据绘图功能，支持对接收到的数据进行可视化显示。

## 🎯 新增功能

### 1. 实时数据绘图
- **TCP实时绘图**：TCP接收的数据实时绘制
- **UART实时绘图**：UART接收的数据实时绘制
- **独立绘图界面**：TCP和UART各自独立的绘图区域
- **多通道支持**：支持多通道数据同时显示

### 2. 数据格式支持
- **标准格式**：`"1.0, 2.2, 3.3\n"`
- **多通道数据**：支持1-6个通道的数据
- **实时更新**：数据实时绘制，自动滚动
- **数据缓冲**：最多显示100个数据点

## 🚀 界面结构

```
┌─────────────────────────────────────────────────────────┐
│                TCP/UART统一通信应用                      │
├─────────────────────┬───────────────────────────────────┤
│    TCP通信 (800px)  │        UART通信 (800px)          │
│  ┌───────────────┐  │  ┌─────────────────────────────┐   │
│  │ 模式选择      │  │  │ 串口配置                   │   │
│  │ 连接配置      │  │  │ 数据发送                   │   │
│  │ 数据发送      │  │  │ 快速发送                   │   │
│  │ 数据转发      │  │  │ 数据转发                   │   │
│  ├───────────────┤  │  ├─────────────────────────────┤   │
│  │ TCP数据接收   │  │  │ UART数据接收               │   │
│  │ ┌───────────┐ │  │  │ ┌─────────────────────────┐ │   │
│  │ │ 控制按钮  │ │  │  │ │ 控制按钮               │ │   │
│  │ ├───────────┤ │  │  │ ├─────────────────────────┤ │   │
│  │ │           │ │  │  │ │                         │ │   │
│  │ │ TCP数据显示│ │  │  │ │     UART数据显示        │ │   │
│  │ │           │ │  │  │ │                         │ │   │
│  │ └───────────┘ │  │  │ └─────────────────────────┘ │   │
│  ├───────────────┤  │  ├─────────────────────────────┤   │
│  │ TCP实时绘图   │  │  │ UART实时绘图              │   │
│  │ ┌───────────┐ │  │  │ ┌─────────────────────────┐ │   │
│  │ │           │ │  │  │ │                         │ │   │
│  │ │ 实时曲线图 │ │  │  │ │     实时曲线图          │ │   │
│  │ │           │ │  │  │ │                         │ │   │
│  │ └───────────┘ │  │  │ └─────────────────────────┘ │   │
│  └───────────────┘  │  └─────────────────────────────┘   │
└─────────────────────┴───────────────────────────────────┘
```

## 📋 使用方法

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 运行应用
```bash
python tcp_uart_unified_app.py
```

### 3. 数据格式要求
发送的数据必须是以下格式：
```
"1.0, 2.2, 3.3\n"
```

### 4. 绘图功能使用
1. **连接通信**：建立TCP或UART连接
2. **发送数据**：发送符合格式的数据
3. **实时绘图**：数据自动绘制在对应的绘图区域
4. **清空绘图**：使用"清空TCP绘图"或"清空UART绘图"按钮

## 🔧 技术实现

### 1. 绘图组件
- **RealTimePlotWidget**：实时绘图组件类
- **matplotlib**：绘图库，支持实时更新
- **多通道支持**：支持1-6个通道的数据
- **颜色区分**：不同通道使用不同颜色

### 2. 数据处理
- **数据解析**：自动解析逗号分隔的数值
- **数据缓冲**：最多保存100个数据点
- **实时更新**：新数据自动添加到绘图
- **错误处理**：忽略无法解析的数据

### 3. 界面集成
- **独立绘图区域**：TCP和UART各自独立的绘图区域
- **固定高度**：绘图区域固定高度200像素
- **控制按钮**：清空绘图功能
- **实时更新**：数据接收时自动更新绘图

## 💡 功能特点

### 1. 实时绘图
- **自动更新**：数据接收时自动更新绘图
- **多通道显示**：支持多通道数据同时显示
- **颜色区分**：不同通道使用不同颜色
- **图例显示**：多通道时显示图例

### 2. 数据管理
- **数据缓冲**：最多显示100个数据点
- **自动滚动**：新数据自动添加到绘图
- **清空功能**：可清空绘图数据
- **错误处理**：忽略格式错误的数据

### 3. 界面优化
- **独立区域**：TCP和UART各自独立的绘图区域
- **固定大小**：绘图区域大小固定
- **控制按钮**：清空绘图功能
- **实时更新**：数据实时显示

## 🎯 使用场景

### 1. 传感器数据监控
- **温度传感器**：监控温度变化
- **压力传感器**：监控压力变化
- **多传感器**：同时监控多个传感器

### 2. 设备状态监控
- **电机状态**：监控电机运行状态
- **系统参数**：监控系统运行参数
- **实时数据**：实时显示设备数据

### 3. 数据可视化
- **实验数据**：可视化实验数据
- **测试数据**：可视化测试结果
- **趋势分析**：分析数据趋势

## 🚨 注意事项

1. **数据格式**：必须使用逗号分隔的数值格式
2. **依赖安装**：需要安装matplotlib和numpy
3. **性能考虑**：大量数据可能影响性能
4. **内存使用**：数据缓冲会占用内存

## 📊 性能优化

1. **数据缓冲**：限制最大显示点数
2. **实时更新**：只更新必要的部分
3. **错误处理**：忽略无效数据
4. **内存管理**：定期清理旧数据

这个增强版应用现在支持实时数据绘图功能，可以可视化显示TCP和UART接收的数据！

# 简单TCP通信示例

这个项目包含了简单的TCP服务器和客户端实现，比现有的复杂版本更容易理解和使用。

## 文件说明

### 1. `simple_tcp_server.py` - 简单TCP服务器
- 监听指定端口，接受客户端连接
- 为每个客户端创建独立线程处理
- 回显客户端发送的消息
- 支持多客户端同时连接

### 2. `simple_tcp_client.py` - 简单TCP客户端
- 连接到TCP服务器
- 支持交互式消息发送
- 提供测试消息发送功能
- 自动接收服务器回复

### 3. `serial_tcp_0.py` - 主程序
- 可以选择运行TCP服务器或串口测试
- 集成了简单的TCP服务器功能

## 使用方法

### 启动TCP服务器
```bash
python simple_tcp_server.py
```
或者
```bash
python serial_tcp_0.py
# 然后选择选项 1
```

### 启动TCP客户端
```bash
python simple_tcp_client.py
```

客户端启动后会提示选择模式：
1. 交互式客户端 - 可以手动输入消息
2. 发送测试消息 - 自动发送预设的测试消息

## 功能特点

### 服务器功能
- ✅ 多客户端支持
- ✅ 消息回显
- ✅ 优雅的连接管理
- ✅ 异常处理
- ✅ 线程安全

### 客户端功能
- ✅ 自动重连机制
- ✅ 异步消息接收
- ✅ 交互式输入
- ✅ 测试模式

## 示例对话

**服务器端输出：**
```
TCP服务器启动成功，监听 localhost:8080
等待客户端连接...
客户端连接: ('127.0.0.1', 54321)
收到来自 ('127.0.0.1', 54321) 的消息: Hello Server!
收到来自 ('127.0.0.1', 54321) 的消息: quit
客户端 ('127.0.0.1', 54321) 断开连接
```

**客户端输出：**
```
成功连接到服务器 localhost:8080
请输入消息: Hello Server!
收到服务器消息: 服务器收到: Hello Server!
请输入消息: quit
已断开连接
```

## 配置选项

可以通过修改类的构造函数参数来调整配置：

```python
# 服务器配置
server = SimpleTCPServer(host='0.0.0.0', port=8080)  # 监听所有接口

# 客户端配置
client = SimpleTCPClient(host='192.168.1.100', port=8080)  # 连接到指定IP
```

## 与现有代码的区别

相比 `mylib/my_tcp.py` 中的复杂实现，这个简单版本：

- 🔹 代码更简洁，易于理解
- 🔹 功能更专注，专注于基本的TCP通信
- 🔹 没有复杂的数据处理和保存功能
- 🔹 更适合学习和测试用途
- 🔹 启动更快，资源占用更少
